os: linux
dist: xenial
language: go
services:
  - mysql
  - postgresql
go:
  - "1.16"
branches:
  only:
    - main
    - /^release-.*$/
addons:
  apt:
    packages:
      - g++-multilib
      - libacl1-dev
      - redis-server
      - attr
      - lsof
      - gcc-mingw-w64 # for windows
before_install:
  - source ./check-docs.sh
  - echo "before_install TRAVIS"
  - echo $TRAVIS
install: true
jobs:
  include:
    - stage: "prepare"
      script:
        - echo $TRAVIS
        - echo "TRAVIS"
        - echo "TRAVIS"
        - echo $TRAVIS
        - echo "prepare TRAVIS"
      if: env(TRAVIS) = true

    - stage: "skip"
      before_install: skip
      install: skip
      script:
        - echo "skip test"