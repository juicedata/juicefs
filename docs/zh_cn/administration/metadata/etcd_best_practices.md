# ETCD 最佳实践

由于 ETCD 自身的产品定位，在小规模文件时，采用它作为 JuiceFS 元数据存储引擎较为合适。当文件规模较大时，可以将元数据从 ETCD 导出，再导入其他存储引擎。

:::tip 建议1
ETCD 默认配置的存储配额为2GB，在不压缩的情况下，可以存储200多万的文件，修改--quota-backend-bytes参数，即可扩大配额，官方建议的最大容量为8GB。
:::


:::tip 建议2
ETCD 默认会保留数据的多个版本，建议修改--auto-compaction-retention参数，可以显著减少数据量。
:::


:::tip 建议3
当数据达到配额限制时，可以通过手动压缩（etcdctl compact）和整理碎片（etcdctl defrag）的方式，减少容量占用。在做手动操作时，强烈建议对 ETCD 集群的单台机器进行，而不是对整个集群操作，可能会导致整个 ETCD 集群部分时间不可用。
:::


:::note 注意
本文部分内容来自 ETCD 官网，若有不一致的表述，请以 ETCD 官方文档为准。
:::
