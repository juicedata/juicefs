import unittest
from command import JuicefsCommandMachine

class TestCommand(unittest.TestCase):
    def test_dump(self):
        state = JuicefsCommandMachine()
        folders_0 = state.init_folders()
        files_0 = state.create_file(content=b'', file_name='aazz', mode='w', parent=folders_0, umask=312, user='root')
        state.dump(entry=files_0, fast=False, keep_secret_key=True, skip_trash=True, threads=3)
        state.teardown()

    def test_info(self):
        state = JuicefsCommandMachine()
        folders_0 = state.init_folders()
        state.status()
        state.get_acl(entry=folders_0)
        state.set_acl(default=False, entry=folders_0, group='group3', group_perm={'r', 'w', 'x'}, logical=True, mask={'r'}, not_recalc_mask=False, other_perm={'r', 'w', 'x'}, physical=False, recalc_mask=True, recursive=False, set_mask=False, sudo_user='root', user='user3', user_perm={'x'})
        files_0 = state.create_file(content=b'\xd7\xf7\xfe\xee\xae=@\xf0', file_name='fwaa', mode='a', parent=folders_0, umask=304, user='root')
        state.truncate(file=files_0, size=38673, user='root')
        state.mkdir(mode=3137, parent=folders_0, subdir='bbfd', umask=171, user='user1')
        state.read(file=files_0, length=1501, offset=8556, user='root')
        files_1 = state.rename_file(entry=files_0, new_entry_name='eqys', parent=folders_0, umask=305, user='user1')
        files_with_xattr_0 = state.set_xattr(file=files_0, flag=2, name='\x9d', user='root', value=b'D\xca!sTQ\x94\x85\xd9\xc5\x00i')
        state.read(file=files_0, length=8790, offset=7234, user='user1')
        state.fallocate(file=files_0, length=99115, mode=0, offset=4069, user='root')
        state.remove_xattr(file=files_0, user='root')
        state.list_xattr(file=files_0, user='root')
        state.change_groups(group='group4', groups=['group3', 'user1', 'user3', 'user2', 'root', 'group2', 'group4'], user='user1')
        state.remove_xattr(file=files_0, user='root')
        files_2 = state.clone_cp_file(entry=files_0, new_entry_name='aejv', parent=folders_0, preserve=True, umask=157, user='root')
        files_3 = state.clone_cp_file(entry=files_0, new_entry_name='mcpw', parent=folders_0, preserve=True, umask=154, user='root')
        files_4 = state.rename_file(entry=files_2, new_entry_name='uzfm', parent=folders_0, umask=143, user='user1')
        files_5 = state.clone_cp_file(entry=files_0, new_entry_name='qiua', parent=folders_0, preserve=False, umask=466, user='root')
        state.remove_xattr(file=files_0, user='user1')
        state.unlink(file=files_3, user='root')
        files_6 = state.rename_file(entry=files_0, new_entry_name='sqhl', parent=folders_0, umask=310, user='root')
        state.open(file=files_2, flags=[1052672, 0, 512, 2, 128, 4096, 64, 1, 1024], mode=3589, umask=388, user='user1')
        state.create_file(content=b'\x0e', file_name='axca', mode='w', parent=folders_0, umask=76, user='user1')
        state.read(file=files_2, length=3974, offset=1928, user='user1')
        state.truncate(file=files_5, size=50155, user='root')
        state.clone_cp_dir(entry=folders_0, new_entry_name='mwae', parent=folders_0, preserve=True, umask=345, user='root')
        state.info(entry=files_2, raw=True, recuisive=True, user='root')
        state.rmr(entry=files_2, user='root')
        state.listdir(dir=folders_0, user='user1')
        state.open(file=files_2, flags=[0, 4096, 512, 1052672], mode=3998, umask=494, user='root')
        state.open(file=files_5, flags=[128, 1052672, 0], mode=3567, umask=14, user='user1')
        state.list_xattr(file=files_0, user='user1')
        state.change_groups(group='user3', groups=['root', 'user3'], user='user1')
        files_7 = state.unlink(file=files_2, user='root')
        state.utime(access_time=124446699, entry=folders_0, follow_symlinks=False, modify_time=19, user='user1')
        state.remove_xattr(file=files_0, user='root')
        state.info(entry=folders_0, raw=True, recuisive=False, user='root')
        state.teardown()

if __name__ == '__main__':
    unittest.main()